FROM sider/devon_rex_npm:2.2.0

<%= ERB.new(File.read('images/Dockerfile.base.erb')).result %>

ARG STYLELINT_VERSION=10.1.0
ARG STYLELINT_CONFIG_RECOMMENDED_VERSION=2.2.0

# Install stylelint globally
USER root
RUN npm install -g stylelint@${STYLELINT_VERSION} stylelint-config-recommended@${STYLELINT_CONFIG_STANDARD_VERSION}
USER $RUNNER_USER

COPY images/stylelint/sider_recommended_config.yaml images/stylelint/sider_recommended_stylelintignore $RUNNER_USER_HOME/

ENTRYPOINT ["node_harness", "--analyzer=stylelint"]
